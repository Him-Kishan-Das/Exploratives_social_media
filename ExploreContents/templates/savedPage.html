{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Saved Contents - {{ request.user.username }}</title>
    <link rel="stylesheet" href="{% static 'header.css' %}" />
    <link rel="stylesheet" href="{% static 'left-navigation.css' %}" />
    <link rel="stylesheet" href="{% static 'savedPage.css' %}" />
  </head>
  <body>
    <div class="main">
      <div id="left-sider">{% include "left-navigation.html" %}</div>

      <div class="saved-contents-main">
        <h1 class="title">Saved Contents</h1>

        <div class="saved-contents-grid">
          {% if saved_posts %}
            {% for saved_post in saved_posts %}
              <div 
                class="saved-content-item" 
                id="saved-content-{{ saved_post.post.id }}"
              >
                <img 
                  class="saved-content-image" 
                  src="{{ saved_post.post.post_image.url }}" 
                  alt="{{ saved_post.post.post_caption }}" 
                />
                <div class="saved-content-details">
                  <h3 class="saved-content-title">{{ saved_post.post.post_caption }}</h3>
                  <p class="saved-content-description">
                    Saved on: {{ saved_post.saved_at|date:"F j, Y, g:i a" }}
                  </p>
                </div>
              </div>
            {% endfor %}
          {% else %}
            <p class="no-saved-content">No saved contents to display.</p>
          {% endif %}
        </div>

        <!-- Pagination Controls -->
        <div class="pagination">
          {% if saved_posts.has_previous %}
            <a href="?page={{ saved_posts.previous_page_number }}" class="pagination-prev">
              Previous
            </a>
          {% endif %}

          <span class="pagination-info">
            Page {{ saved_posts.number }} of {{ saved_posts.paginator.num_pages }}
          </span>

          {% if saved_posts.has_next %}
            <a href="?page={{ saved_posts.next_page_number }}" class="pagination-next">
              Next
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  </body>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const savedContentItems = document.querySelectorAll('.saved-content-item');

      savedContentItems.forEach(item => {
        item.addEventListener('click', function () {
          const id = this.id.split('-')[2];
          alert(`You clicked on saved content with Post ID: ${id}`);
          // Additional actions can be added here.
        });
      });
    });
  </script>
</html>
